# Результати нормалізації бази даних

---

## Початковий стан - Ненормалізована форма

### Структура таблиці

```
Замовлення
├── Номер_замовлення (PK) - INT
├── Назва товару_і_кількість - VARCHAR(45)
├── Адреса_клієнта - VARCHAR(45)
├── Дата_замовлення - VARCHAR(45)
└── Клієнт - VARCHAR(45)
```

### Приклад даних
| Номер_замовлення | Назва товару_і_кількість | Адреса_клієнта | Дата_замовлення | Клієнт |
|------------------|-------------------------|----------------|-----------------|---------|
| 101 | Лептоп: 3,\nМишка: 2 | Хрещатик 1 | 2023-03-15 | Мельник |
| 102 | Принтер: 1 | Басейна 2 | 2023-03-16 | Шевченко |
| 103 | Мишка: 4 | Комп'ютерна 3 | 2023-03-17 | Коваленко |

### Виявлені проблеми
❌ **Багатозначні комірки**: Замовлення 101 містить два товари в одній комірці
❌ **Неатомарні значення**: Назва товару та кількість об'єднані в одному стовпці
❌ **Неправильні типи даних**: Дата зберігається як VARCHAR замість DATE
❌ **Порушення 1NF**: Комірки повинні містити тільки атомарні значення

---

## Перша нормальна форма - 1NF

### Застосовані зміни
1. Розділено багатозначні комірки на окремі рядки
2. Розділено назву товару та кількість на окремі стовпці
3. Додано автоінкрементний `id` як новий первинний ключ
4. Змінено тип `Дата_замовлення` з VARCHAR на DATE
5. Змінено тип `Кількість` на INT

### Структура таблиці
```
Замовлення
├── id (PK) - INT AUTO_INCREMENT
├── Номер_замовлення - INT
├── Назва_товару - VARCHAR(45)
├── Кількість - INT
├── Адреса_клієнта - VARCHAR(45)
├── Дата_замовлення - DATE
└── Клієнт - VARCHAR(45)
```

### Приклад даних (4 рядки замість 3)
| id | Номер_замовлення | Назва_товару | Кількість | Адреса_клієнта | Дата_замовлення | Клієнт |
|----|------------------|--------------|-----------|----------------|-----------------|---------|
| 1 | 101 | Лептоп | 3 | Хрещатик 1 | 2023-03-15 | Мельник |
| 2 | 101 | Мишка | 2 | Хрещатик 1 | 2023-03-15 | Мельник |
| 3 | 102 | Принтер | 1 | Басейна 2 | 2023-03-16 | Шевченко |
| 4 | 103 | Мишка | 4 | Комп'ютерна 3 | 2023-03-17 | Коваленко |

### 1NF досягнуто
* Всі значення атомарні
* Кожен стовпець містить значення одного типу
* Кожен рядок унікальний (через id PK)
* Використано правильні типи даних

### Залишились проблеми
* **Надмірність даних**: Замовлення 101 дублює інформацію про клієнта (Хрещатик 1, 2023-03-15, Мельник)
* **Часткова залежність**: Атрибути рівня замовлення залежать тільки від `Номер_замовлення`, а не від товару

---

## Друга нормальна форма - 2NF

### Застосовані зміни
1. Декомпозиція на 2 таблиці для усунення часткових залежностей
2. Створено таблицю `Замовлення` для даних рівня замовлення
3. Створено таблицю `Позиції_замовлення` для даних рівня товарів
4. Додано зовнішній ключ

### Структури таблиць

#### Таблиця 1: Замовлення
```
Замовлення
├── Номер_замовлення (PK) - INT
├── Адреса_клієнта - VARCHAR(45)
├── Дата_замовлення - DATE
└── Клієнт - VARCHAR(45)
```

**Дані (3 рядки)**
| Номер_замовлення | Адреса_клієнта | Дата_замовлення | Клієнт |
|------------------|----------------|-----------------|---------|
| 101 | Хрещатик 1 | 2023-03-15 | Мельник |
| 102 | Басейна 2 | 2023-03-16 | Шевченко |
| 103 | Комп'ютерна 3 | 2023-03-17 | Коваленко |

#### Таблиця 2: Позиції_замовлення
```
Позиції_замовлення
├── Номер_замовлення (PK, FK) - INT
├── Назва_товару (PK) - VARCHAR(45)
└── Кількість - INT
```

**Дані (4 рядки)**
| Номер_замовлення | Назва_товару | Кількість |
|------------------|--------------|-----------|
| 101 | Лептоп | 3 |
| 101 | Мишка | 2 |
| 102 | Принтер | 1 |
| 103 | Мишка | 4 |

### 2NF досягнуто ✓
* Вже у 1NF
* Немає часткових залежностей - всі неключові атрибути повністю залежать від первинного ключа
* Усунено надмірність - дані клієнта для замовлення 101 зберігаються один раз

### Залишились проблеми
* **Транзитивна залежність у Замовлення**: `Номер_замовлення` → `Клієнт` → `Адреса_клієнта`
* **Проблема природних ключів**: Використовуються імена клієнтів та товарів як ключі (потрібно використовувати ID)
* **Відсутня таблиця товарів**: Назви товарів дублюються, немає централізованого управління товарами

---

## Третя нормальна форма - 3NF

### Застосовані зміни
1. Створено таблицю `Клієнти` для усунення транзитивної залежності
2. Створено таблицю `Товари` для централізованого управління товарами
3. Замінено всі природні ключі (імена) на сурогатні ключі (ID)
4. Оновлено зв'язки зовнішніх ключів
5. Фінальна схема: 4 таблиці з належною цілісністю посилань

### Фінальні структури таблиць

#### Таблиця 1: Клієнти
```
Клієнти
├── id (PK) - INT AUTO_INCREMENT
├── Клієнт - VARCHAR(45) UNIQUE
└── Адреса_клієнта - VARCHAR(45)
```

**Дані (3 рядки)**
| id | Клієнт | Адреса_клієнта |
|----|---------|----------------|
| 1 | Мельник | Хрещатик 1 |
| 2 | Шевченко | Басейна 2 |
| 3 | Коваленко | Комп'ютерна 3 |

#### Таблиця 2: Товари
```
Товари
├── id (PK) - INT AUTO_INCREMENT
└── Назва_товару - VARCHAR(45) UNIQUE
```

**Дані (3 рядки)**
| id | Назва_товару |
|----|--------------|
| 1 | Лептоп |
| 2 | Мишка |
| 3 | Принтер |

#### Таблиця 3: Замовлення
```
Замовлення
├── Номер_замовлення (PK) - INT
├── Клієнт_id (FK) - INT → Клієнти(id)
└── Дата_замовлення - DATE
```

**Дані (3 рядки)**
| Номер_замовлення | Клієнт_id | Дата_замовлення |
|------------------|-----------|-----------------|
| 101 | 1 | 2023-03-15 |
| 102 | 2 | 2023-03-16 |
| 103 | 3 | 2023-03-17 |

#### Таблиця 4: Позиції_замовлення
```
Позиції_замовлення
├── Номер_замовлення (PK, FK) - INT → Замовлення(Номер_замовлення)
├── Товар_id (PK, FK) - INT → Товари(id)
└── Кількість - INT
```

**Дані (4 рядки)**
| Номер_замовлення | Товар_id | Кількість |
|------------------|----------|-----------|
| 101 | 1 | 3 |
| 101 | 2 | 2 |
| 102 | 3 | 1 |
| 103 | 2 | 4 |

### 3NF досягнуто ✓
* Вже у 2NF
* Немає транзитивних залежностей - адреса клієнта залежить тільки від ID клієнта
* Всі сурогатні ключі (INT) для кращої продуктивності
* Централізоване управління товарами та клієнтами
* Належна цілісність посилань через зовнішні ключі
* Можливість розширення додатковими атрибутами (наприклад, ціна товару, email клієнта)

---

## Підсумок покращень

### Ефективність зберігання
| Етап | Таблиць | Рядків | Надмірність |
|-------|--------|------|------------|
| Початковий | 1 | 3 | Висока - багатозначні комірки |
| 1NF | 1 | 4 | Висока - дубльовані дані замовлень |
| 2NF | 2 | 7 всього | Середня - природні ключі |
| 3NF | 4 | 13 всього | Відсутня - всі дані нормалізовані |
